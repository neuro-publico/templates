<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Template landing page</title>
  <link rel="stylesheet" href="./styles.css">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

</head>

<body>
<div id="capture">
  <!-- Banner -->
  <div class="promo-banner">
    <span class="promo-banner__text">‚è∞ ¬°√öLTIMAS UNIDADES!</span>
    <button class="promo-banner__close" aria-label="Cerrar banner">√ó</button>
  </div>

  <header class="header">
    <div class="container">
      <h1 class="logo">LOGO</h1>
    </div>
  </header>

  <main class="main-content">
    <div class="container-hero">
      <!-- HERO: Carrusel 4:3 -->
      <section class="hero-section">
         <!-- Hero con galer√≠a -->
    <div class="container hero-section">
        <div class="product-grid">
          <!-- Galer√≠a de im√°genes -->
          <div class="gallery">
            <div class="main-image">
                <!-- Estas imagenes son de solo producto -->
              <img id="mainImage" src="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?auto=format&fit=crop&q=80" alt="Producto principal">
            </div>
            <div class="thumbnails">
              <button class="thumbnail active" data-image="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?auto=format&fit=crop&q=80">
                <img src="https://images.unsplash.com/photo-1620916566398-39f1143ab7be?auto=format&fit=crop&q=80" alt="Miniatura 1">
              </button>
              <button class="thumbnail" data-image="https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?auto=format&fit=crop&q=80">
                <img src="https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?auto=format&fit=crop&q=80" alt="Miniatura 2">
              </button>
              <button class="thumbnail" data-image="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?auto=format&fit=crop&q=80">
                <img src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?auto=format&fit=crop&q=80" alt="Miniatura 3">
              </button>
              <button class="thumbnail" data-image="https://images.unsplash.com/photo-1527799820374-dcf8d9d4a388?auto=format&fit=crop&q=80">
                <img src="https://images.unsplash.com/photo-1527799820374-dcf8d9d4a388?auto=format&fit=crop&q=80" alt="Miniatura 4">
              </button>
            </div>
          </div>
  
        </div>

        <div class="product-image">
          <img
            src="https://images.unsplash.com/photo-1608248597279-f99d160bfcbc?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
            alt="Shampoo de Arg√°n"
            class="product-image__img"
          />
        </div>
<!-- Los campos de esta secci√≥n se llamaran del onboarding -->
        <div class="product-info">
          <h2 class="product-title">{Product}</h2>
          <div class="rating-container">
            <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <span class="reviews-text">{Product_rating}</span>
          </div>
          <div class="price-container">
            <p class="price-old">{Price}</p>
            <p class="price-current">{Sale}</p>
            <p class="price-tag">{Payment_method}</p>
          </div>
          <a href="#checkout" class="cta-button hero-cta">COMPRAR AHORA</a>


          <section class="content-section content-section--tight">
            <p class="content-section__text">
              {Product_description}
            </p>
          </section>

          <section class="content-section content-section--tight ingredients-section">
            <h3 class="content-section__title">CARACTER√çSTICAS:</h3>
          </br>
            <ul class="ingredients-list">
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
              <li>
                <span class="check-icon">‚úì</span>
                <span>{Features_list}</span>
              </li>
          </section>
        </div>
      </section>
    </div>
<!-- Los campos de esta secci√≥n se llamaran del onboarding -->
    <section class="payment-security-section-wide-2">
      <div class="payment-security-section__wrapper">
        <div class="payment-security-icon">üîí</div>
        <p class="payment-security-text">Tendras {#} d√≠as de garant√≠a, compra sin preocupaciones</p>
      </div>
    </section>


    <div class="container">
      <!-- BENEFICIOS -->
      <section class="benefits-section">
        <div class="benefits-grid">
          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4>
            <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>

          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4> 
             <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1519699047748-de8e457a634e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>

          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4>
            <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1515377905703-c4788e51af15?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>

          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4>
            <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>

          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4>
            <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1522337660859-02fbefca4702?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>

          <div class="benefit-card">
            <h4 class="benefit-card__title">{Benefits_title}</h4>
            <!-- Esta imagen es de un beneficio -->
            <div class="benefit-card__image">
              <img
                src="https://images.unsplash.com/photo-1519415943484-9fa1873496d4?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Benefits_img"
              />
            </div>
            <p class="benefit-card__text">
              {Benefits_description}
            </p>
          </div>
        </div>
      </section>

      <!-- Dolor... -->
      <section class="pain-points-section">
        <div class="pain-point-content">
          <div class="pain-point-text">
            <h3 class="pain-point-text__title">{Pain_points_title}</h3>
          </div>
          <div class="pain-point-image">
            <!-- Esta imagen es de un punto de dolor del usuario final --> 
            <img
              src="https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
              alt="Cabello da√±ado"
            />
          </div>
          <div class="pain-point-text">
            <p>
              {Pain_points_description}
            </p>
          </div>
        </div>
      </section>

      <!-- Casos de uso -->
      <section class="use-cases-section">
        <div class="use-case-content">
          <div class="use-case-image">
            <!-- Esta imagen representa un caso de uso del producto/servicio --> 
            <img
              src="https://images.unsplash.com/photo-1519415510236-718bdfcd89c8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
              alt="Caso de uso"
            />
          </div>
          <div class="use-case-text">
            <h3 class="use-case-text__title">{Use_cases_title}</h3>
            <div class="use-case-check">
              <span class="check-icon">‚úì</span>
              <p>{Use_cases_item}</p>
            </div>
          </div>
        </div>
      </section>
    </div>

<!-- Los campos de esta secci√≥n se llamaran del onboarding -->
      <section class="payment-security-section-wide">
        <div class="payment-security-section__wrapper">
          <div class="payment-security-icon">üí≥</div>
          <p class="payment-security-text">{Payment_method}, f√°cil y seguro</p>
        </div>
      </section>



      <div class="container">
      <!-- Testimonios -->
      <section class="content-section reviews-section">
        <div class="reviews-title-box">
          <h3 class="content-section__title">Testimonios</h3>
        </div>
        <div class="review-grid">
          <!-- 6 testimonios de ejemplo -->
          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            </div>
          </div>

          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            </div>
          </div>

          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            </div>
          </div>

          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            </div>
          </div>

          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            </div>
          </div>

          <div class="review-card">
            <div class="review-image">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="review-icon">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
            </div>
            <div class="review-header">
              <h4 class="review-name">{Testimonials_name}</h4>
            </div>
            <p class="review-text">
              {Testimonials_description}
            </p>
            <div class="review-footer">
              <div class="review-verified">
                <span>‚úì</span>
                <span>Compra verificada</span>
              </div>
              <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            </div>
          </div>
        </div>
      </section>
      

      

      <!-- Secci√≥n de Preguntas Frecuentes (FAQ) -->
      <section class="faq-section">
        <div class="faq-title-box">
          <h3>Preguntas Frecuentes</h3>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            {FAQs_question} 
            <span class="faq-toggle">+</span>
          </button>
          <div class="faq-answer">
            <p>{FAQs_answer}</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            {FAQs_question}
            <span class="faq-toggle">+</span>
          </button>
          <div class="faq-answer">
            <p>{FAQs_answer}</p>
          </div>
        </div>

        <div class="faq-item">
          <button class="faq-question">
            {FAQs_question}
            <span class="faq-toggle">+</span>
          </button>
          <div class="faq-answer">
            <p>{FAQs_answer}</p>
          </div>
        </div>
      </section>

      <!-- Checkout -->
      <section id="checkout" class="checkout-section">
        <h3 class="checkout-section__title">¬°{Checkout_title}!</h3>
        <div class="product-summary">
          <h4 class="summary-title">Resumen de tu compra:</h4>
          <div class="product-summary__content">
          <!-- Esta imagene es del producto -->
            <img
              src="https://images.unsplash.com/photo-1535585209827-a15fcdbc4c2d?auto=format&fit=crop&q=80"
              alt="Shampoo de Arg√°n"
              class="product-summary__image"
            />
            <!-- Los campos de esta secci√≥n se llamaran del onboarding -->
            <div class="product-summary__info">
              <h5>{Product}</h5>
              <ul class="product-summary__list">
                <!-- <li>{Gift_title}</li> -->
                <li>{#} d√≠as de garant√≠a</li>
                <li>Env√≠o gratis a todo el pa√≠s</li>
              </ul>

            </div>
          </div>
        </div>

        <div class="quantity-selector">
          <span class="quantity-label">Cantidad:</span>
          <div class="quantity-controls">
            <button class="quantity-button js-quantity-minus">-</button>
            <span class="quantity-display js-quantity-value">1</span>
            <button class="quantity-button js-quantity-plus">+</button>
          </div>
        </div>

        <!-- Bump Offer -->
        <div class="bump-offer">
          <div class="bump-content">
            <!-- Agregamos el tag de oferta √∫nica -->
            <div class="bump-tag">Unique offer</div>
            <div class="bump-header">
              <img
                src="https://picsum.photos/200?grayscale"
                alt="Kit de cuidado"
                class="bump-image"
              />
              <div class="bump-info">
              <h6>{Bump_offer_product}</h6>
              <p>{Bump_offer_description}</p>
              </div>
            </div>
              <p class="bump-price">price: {Bump_offer_price}</p>
              <!-- Texto + toggle debajo del precio -->
              <div class="bump-bottom-row">
                <h5 class="bump-add-title">Add to my ordern</h5>
                <div class="bump-toggle js-bump-toggle"></div>
            </div>
          </div>
        </div>
        
        <div id="card-element"></div>
        <div id="card-errors" role="alert"></div>

        
      </section>
    </div>
    </div>

  </main>

  <!-- Barra fija inferior -->
  <!-- Los campos de esta secci√≥n se llamaran del onboarding -->
  <div class="bottom-bar js-bottom-bar">
    <div class="bottom-bar__content container">
      <div class="bottom-bar__top">
        <div class="bottom-bar__price">
          <p class="price-old-fixed">{Price}</p>
          <p class="price-current-fixed">{Sale}</p>
        </div>
        <div class="shipping-info">
          <div class="info-tag">Env√≠o gratis</div>
          <div class="info-tag">{Payment_method}</div>
        </div>
      </div>
      <div class="bottom-bar__bottom">
        
        <!-- <a href="Upsell.html" class="cta-button bottom-bar__cta">COMPRAR AHORA</a> -->

        <form id="order-form">
          <!-- Other form fields -->
          <button type="submit" class="cta-button bottom-bar__cta">COMPRAR AHORA</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="https://js.stripe.com/v3/"></script>
<script>
/* 2) Carrusel arreglado */
document.addEventListener('DOMContentLoaded', () => {
  const wrapper = document.querySelector('.js-hero-carousel-wrapper');
  const slides = document.querySelectorAll('.hero-carousel__slide');
  const arrowLeft = document.querySelector('.hero-carousel .left');
  const arrowRight = document.querySelector('.hero-carousel .right');
  let currentIndex = 0;
  const totalSlides = slides.length;

  function moveSlide(direction){
    // Ajustamos el √≠ndice sin pasarnos
    currentIndex = (currentIndex + direction + totalSlides) % totalSlides;
    wrapper.style.transform = `translateX(${-100 * currentIndex}%)`;
  }

  if(arrowLeft && arrowRight && wrapper && slides){
    arrowLeft.addEventListener('click', () => moveSlide(-1));
    arrowRight.addEventListener('click', () => moveSlide(1));
  }
});
</script>

<script>
// Captura con html2canvas
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.getElementById('btnCapturar');
  const outputDiv = document.getElementById('canvasOutput');
  if(btn && outputDiv){
    btn.addEventListener('click', () => {
      const captureElement = document.getElementById('capture');
      if(!captureElement){
        console.error('No se encontr√≥ #capture');
        return;
      }
      html2canvas(captureElement)
        .then(canvas => {
          outputDiv.innerHTML = '';
          outputDiv.appendChild(canvas);
        })
        .catch(err => {
          console.error('Error al capturar:', err);
        });
    });
  }
});
</script>

<script>
// Mostrar/ocultar barra fija inferior al hacer scroll
document.addEventListener('DOMContentLoaded', () => {
  const bottomBar = document.querySelector('.js-bottom-bar');
  const firstViewportHeight = window.innerHeight;
  let lastScrollY = window.scrollY;
  let ticking = false;

  window.addEventListener('scroll', () => {
    lastScrollY = window.scrollY;
    if(!ticking){
      window.requestAnimationFrame(() => {
        if(bottomBar){
          if(lastScrollY > firstViewportHeight){
            bottomBar.style.display = 'block';
            bottomBar.offsetHeight; // Forzar reflow
            bottomBar.classList.add('visible');
          } else {
            bottomBar.classList.remove('visible');
            setTimeout(() => {
              if(!bottomBar.classList.contains('visible')){
                bottomBar.style.display = 'none';
              }
            },400);
          }
        }
        ticking = false;
      });
      ticking = true;
    }
  });

  // Cerrar banner
  const promoCloseBtn = document.querySelector('.promo-banner__close');
  if(promoCloseBtn){
    promoCloseBtn.addEventListener('click', () => {
      const promoBanner = document.querySelector('.promo-banner');
      if(promoBanner){
        promoBanner.style.display = 'none';
      }
    });
  }

  // Smooth scroll para anclas
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', e => {
      e.preventDefault();
      const target = document.querySelector(anchor.getAttribute('href'));
      if(target){
        target.scrollIntoView({behavior:'smooth'});
      }
    });
  });

  // Toggle Bump Offer
  const bumpToggle = document.querySelector('.js-bump-toggle');
  if(bumpToggle){
    bumpToggle.addEventListener('click', () => {
      bumpToggle.classList.toggle('active');
    });
  }

  // Control de cantidad
  const minusBtn = document.querySelector('.js-quantity-minus');
  const plusBtn = document.querySelector('.js-quantity-plus');
  const quantityDisplay = document.querySelector('.js-quantity-value');
  if(minusBtn && plusBtn && quantityDisplay){
    minusBtn.addEventListener('click', () => {
      let qty = parseInt(quantityDisplay.textContent,10);
      if(qty>1) quantityDisplay.textContent = qty-1;
    });
    plusBtn.addEventListener('click', () => {
      let qty = parseInt(quantityDisplay.textContent,10);
      quantityDisplay.textContent = qty+1;
    });
  }

  // Manejo form (simulaci√≥n)
  const orderForm = document.querySelector('.js-order-form');
  if(orderForm){
    orderForm.addEventListener('submit', e => {
      e.preventDefault();
      alert('¬°Gracias! Tu orden ha sido registrada (simulaci√≥n).');
    });
  }

  // 3) FAQ Desplegables
  const faqItems = document.querySelectorAll('.faq-item');
  faqItems.forEach(item => {
    const btn = item.querySelector('.faq-question');
    if(btn){
      btn.addEventListener('click', () => {
        item.classList.toggle('active');
      });
    }
  });
});
script>
    // Inicializar iconos de Lucide
    lucide.createIcons();

  </script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Gallery functionality
  const mainImage = document.getElementById('mainImage');
  const thumbnails = document.querySelectorAll('.thumbnail');

  thumbnails.forEach(thumbnail => {
    thumbnail.addEventListener('click', function() {
      // Update main image
      const newImageSrc = this.getAttribute('data-image');
      mainImage.src = newImageSrc;
      
      // Remove active class from all thumbnails
      thumbnails.forEach(thumb => thumb.classList.remove('active'));
      
      // Add active class to clicked thumbnail
      this.classList.add('active');
    });
  });
});
</script>
<script>
  // Initialize Stripe
const stripe = Stripe(
  "pk_test_51Qr37W4gqeXs6usVMNMCBVNQPivoMVqLdDZR0Llzuf2wZgOOLKmQjlIEbVFpGTDaDJ3QQoF1lWLLrFSyU7EoBbw100fRCYiCfo"
); // Replace with your Stripe publishable key

// Create an instance of Elements
const elements = stripe.elements();

// Create an instance of the card Element
const card = elements.create("card");

// Add an instance of the card Element into the `card-element` <div>
card.mount("#card-element");

// Handle form submission
const form = document.getElementById("order-form");
// form.addEventListener("submit", async (event) => {
//   event.preventDefault();

//   // Call your backend to create a setup intent and get the client_secret
//   const response = await fetch("https://services.dev.fluxi.co/api/ms/ecommerce-service/websites/673dabba5a754d4eaef01951b62331e/modification/5ed7a2db2ea54f4890e21951b693de6", {
//     method: "PUT",
//     headers: {
//       "Content-Type": "application/json",
//       "X-Forwarded-For": "192.168.1.1"
//     },
//     body: JSON.stringify({
//       type: "setup_payment_intent"
//     })
//   });

//   const data = await response.json();
//   const client_secret = data.raw_response.extra_info.client_secret;

//   // Confirm the setup intent
//   const result = await stripe.confirmCardSetup(client_secret, {
//     payment_method: {
//       card: card,
//       billing_details: {
//         name: document.getElementById("nombre").value,
//         email: document.getElementById("email").value,
//       },
//     },
//   });

//   if (result.error) {
//     // Display error.message in your UI
//     console.error(result.error.message);
//   } else {
//     // The setup has succeeded. You can now use the payment_method_id
//     console.log("Setup succeeded:", result.setupIntent.payment_method);
//   }




// });
let hashId;
form.addEventListener("submit", (event) => {
  event.preventDefault();

  // === 1) First request: Create the order ===
  fetch("https://services.dev.fluxi.co/api/ms/ecommerce-service/websites/673dabba5a754d4eaef01951b62331e/create-order", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "X-Forwarded-For": "192.168.1.1"
    },
    body: JSON.stringify({
      "customer": {
          "name": "Juan",
          "last_name": "P√©rez",
          "address": "Calle Principal 123",
          "prefix_phone": "+52",
          "phone": "5512345678",
          "email": "juan.perez@ejemplo.com"
      },
      "bump_offer_units": 2,
      "units": 3
    })
  })
    .then((response) => response.json())
    .then((createOrderData) => {
      // Extract the hash_id from the first request
      hashId = createOrderData.hash_id;
      console.log("Order created with hash_id:", hashId);

      // === 2) Second request: Use the hash_id in the modification endpoint ===
      return fetch(`https://services.dev.fluxi.co/api/ms/ecommerce-service/websites/673dabba5a754d4eaef01951b62331e/modification/${hashId}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
          "X-Forwarded-For": "http://127.0.0.1:5500"
        },
        body: JSON.stringify({
          type: "setup_payment_intent"
        })
      });
    })
    .then((response) => response.json())
    .then((data) => {
      // === 3) Extract the client_secret from the second response ===
      const client_secret = data.raw_response.extra_info.client_secret;
      console.log("Received client_secret:", client_secret);

      // === 4) Confirm the Setup Intent with Stripe ===
      return stripe.confirmCardSetup(client_secret, {
        payment_method: {
          card: card,
          billing_details: {
            name:  "Juan",
            email: "juan.perez@ejemplo.com",
          },
        },
      });
    })
    .then((result) => {
      // === 5) Handle Stripe setup results ===
      if (result.error) {
        console.error("Error confirming card setup:", result.error.message);
      } else {
        console.log("Setup succeeded. Payment method ID:", result.setupIntent.payment_method);

        // === 4) Fourth request: Use the payment_method_id in the modification endpoint ===
        return fetch(`https://services.dev.fluxi.co/api/ms/ecommerce-service/websites/a29cb8e6b567490b9f2519501e01e93/modification/${hashId}`, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
            'X-Forwarded-For': '192.168.1.1'
          },
          body: JSON.stringify({
            payment_method_id: result.setupIntent.payment_method,
            type: 'payment_intent'
          })
        });
      }
    })
    .then((finalResponse) => {
      if (!finalResponse.ok) {
        throw new Error('Final modification request failed');
      }
      return finalResponse.json();
    })
    .then((finalData) => {
      console.log('Final modification succeeded:', finalData);
      // Handle success (e.g., show a success message or redirect)
    })
    .catch((error) => {
      console.error('An error occurred:', error);
      // Handle error (e.g., show an error message)
    });
});

</script>

</body>
</html>
